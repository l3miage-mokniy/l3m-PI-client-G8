
<div class="container">
<button type="button" (click)="modeCreateArret()" class="btn btn-secondary btn-lg btn-block">Créer un arrêt</button>
<button type="button" (click)="modeCreateDefi()" class="btn btn-secondary btn-lg btn-block">Créer un défi</button>
<button type="button" (click)="modeEditArret()" class="btn btn-primary btn-lg btn-block">Editer un arrêt</button>

<div *ngIf="createArret">
  <br/>
  <h2 style="text-align: center;">Debut formulaire création d'un arret</h2>
  <p><b>RECUP PAS DANS BDD</b></p>
   <form (ngSubmit)="recupLibNotIn(InputLibNotIn.value)">
     <div class="form-row">
       <div class="form-group col-md-6">
         <label>Libelle d'arret : </label>
         <input
           #InputLibNotIn
           class="form-control"
           name="InputAge"
           type="text"
           placeholder="Libelle"
         />
       </div>
     </div>
     <input class="btn btn-secondary" type="submit" />
   </form>
</div>

<div *ngIf="createDefi">
  <br/>
  <h2 style="text-align: center;">Debut formulaire création d'un défi</h2>
  <p><b>RECUP QUE DANS BDD</b></p>
  <form (ngSubmit)="recupLibIn(InputLib.value)">
    <div class="form-row">
      <div class="form-group col-md-6">
        <label>Libelle d'arret : </label>
        <input
          #InputLib
          class="form-control"
          name="InputAge"
          type="text"
          placeholder="Libelle"
        />
      </div>
    </div>
    <input class="btn btn-secondary" type="submit" />
  </form>
</div>
<br/>
<div *ngIf="editArret">
  <br/>
  <h2 style="text-align: center;">Debut formulaire edit d'un défi</h2>
  <p><b>RECUP QUE DANS BDD</b></p>
  <form (ngSubmit)="recupLibIn(InputLib.value)">
    <div class="form-row">
      <div class="form-group col-md-6">
        <label>Libelle d'arret : </label>
        <input
          #InputLib
          class="form-control"
          name="InputAge"
          type="text"
          placeholder="Libelle"
        />
      </div>
    </div>
    <input class="btn btn-secondary" type="submit" />
  </form>
</div>
</div>


<!--CREATION ARRET-->
<div *ngIf="obsArretInAPI | async as obsAPI" class="container">
  <div *ngIf="obsAPI.length !== 0" class="col-8">
    <button
      (click)="closeChoiceArretInAPI()"
      type="button"
      class="close"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span></button><br />
    <form (ngSubmit)="creationArret(InputStreetMap.value,listeArretNotInBDD.value)">
      <div class="form-group">
        <label for="exampleFormControlSelect2">Example multiple select</label>
        <select
          #listeArretNotInBDD
          multiple
          class="form-control"
          required
        >
          <option *ngFor="let unArret of obsAPI">
            {{
                "Commune : " +
                unArret.properties.COMMUNE +
                ", " +
                unArret.properties.LIBELLE+
                ", " +
                unArret.properties.CODE
            }}
          </option>
        </select>
        <label>Lien streetmap : </label>
        <textarea required #InputStreetMap class="form-control" rows="3"></textarea>
      </div>
      <input class="btn btn-secondary" type="submit" />
    </form>
  </div>
</div>


<div *ngIf="obsArretInBDD | async as obsBDD" class="container">

<!--EDITION ARRET-->
  <div *ngIf="obsBDD.length !== 0 && editArret === true" class="col-12">
    <button
      (click)="closeChoiceArretInBDD()"
      type="button"
      class="close"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span></button
    ><br />
    <form (ngSubmit)="updateArret(SelectArretEdit.value,InputEditStreetmap.value)">
      <div class="form-group">
        <label for="Arret">Arret</label>
        <select
          #SelectArretEdit
          multiple
          class="form-control"
          id="Arret"
          required
        >
          <option *ngFor="let unArret of obsBDD">
            {{
                "Commune : " +
                unArret.properties.COMMUNE +
                ", " +
                unArret.properties.LIBELLE+
                ", " +
                unArret.properties.CODE
            }}
          </option>
        </select>
        <label>Lien streetmap : </label>
        <textarea #InputEditStreetmap class="form-control" rows="3"></textarea>
      </div>
      <input class="btn btn-secondary" type="submit" />
    </form>
  </div>

<!--CREATION DEFI-->
  <!--
  <div *ngIf="obsBDD.length === 0 && !createArret" class="col-8">
    <div class="alert alert-warning" role="alert">
      Aucun arrêt trouvé, <a (click)="modeCreateArret()" class="alert-link">veuillez le créer</a>.
    </div>
  </div>
  -->
  <div *ngIf="obsBDD.length !== 0 && editArret === false" class="col-12">
    <button
      (click)="closeChoiceArretInBDD()"
      type="button"
      class="close"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span></button
    ><br />
    <form (ngSubmit)="creationDefi(InputTITRE.value, SelectType.value,SelectArret.value,InputDescription.value, InputVERSION.value, InputPOINTS.value, InputDUREE.value, InputPrologue.value, InputEpilogue.value, InputCommentaire.value, InputMotClef.value)">
      <div class="form-group">
        <label for="Arret">Arret</label>
        <select
          #SelectArret
          multiple
          class="form-control"
          id="Arret"
          required
        >
          <option *ngFor="let unArret of obsBDD">
            {{
                "Commune : " +
                unArret.properties.COMMUNE +
                ", " +
                unArret.properties.LIBELLE+
                ", " +
                unArret.properties.CODE
            }}
          </option>
        </select>

        <!--Une ligne 2 champs-->
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>Titre : </label>
            <input #InputTITRE class="form-control" name="InputTITRE" type="text" placeholder="Titre"/>
          </div>
        </div>
        <!--Fin une ligne 2 champs-->


        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label for="type" class="input-group-text">Type</label>
          </div>
          <select
          #SelectType
          class="custom-select"
          id="type"
          required
        >
        <option>Enigme</option>
        <option>Challenge</option>
        </select>
        </div>



        <label>Description : </label>
        <textarea #InputDescription class="form-control" rows="3"></textarea>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label>Version : </label>
            <input #InputVERSION class="form-control" name="InputVersion" type="number" placeholder="Version"/>
          </div>
          <div class="form-group col-md-6">
            <label>Points : </label>
            <input #InputPOINTS class="form-control" name="InputPoints" type="number" placeholder="Points"/>
          </div>
          <div class="form-group col-md-6">
            <label>Durée : </label>
            <input #InputDUREE class="form-control" name="InputDuree" type="text" placeholder="Durée"/>
          </div>
        </div>

        <label>Prologue : </label>
        <textarea #InputPrologue class="form-control" rows="3"></textarea>

        <label>Epilogue : </label>
        <textarea #InputEpilogue class="form-control" rows="3"></textarea>

        <label>Commentaire : </label>
        <textarea #InputCommentaire class="form-control" rows="3"></textarea>


      </div>

      <label for="basic-url">Veuillez saisir les mots clefs associés au défi en les séparant avec un espace.</label>
      <input #InputMotClef type="text" class="form-control"  placeholder="Entrez les mots clefs séparés par des espaces.">


      <input class="btn btn-secondary" type="submit" />
    </form>
  </div>
</div>
