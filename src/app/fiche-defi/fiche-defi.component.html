<div *ngIf="affichageDuDefi | async as D">
  <br/>
  <div class="card border-dark mb-6" >
    <div class="card-header">Défi : <b>{{D.leDefi.defi}} - {{D.leDefi.titre}}</b> créé par <b>{{D.leDefi.auteur}}</b>.</div>
    <div class="card-body text-dark" style="padding: 5px;">

      <small>Type : {{D.leDefi.type}}</small>
      -
      <a *ngIf='D.lArret.streetMap !== ""' [href]="D.lArret.streetMap" target="_blank"> <small >Arrêt : {{D.lArret.lib_arret}} , Jouer à distance !</small></a>
      <br/>
      <div class="container">
        <div class="row">
          <div class="col-8">
            <div class="card-text">
              <h6>Description: </h6>
              <p style="white-space:pre-wrap">{{D.leDefi.description}}</p>
            </div>

            <div class="card-text">
              <h6>Prologue: </h6>
              <p style="white-space:pre-wrap" >{{D.leDefi.prologue}}</p>
            </div>


            <div class="card-text">
              <h6>Epilogue: </h6>
              <p style="white-space:pre-wrap" >{{D.leDefi.epilogue}}</p>
            </div>


            <div class="card-text">
              <h6>Commentaire: </h6>
              <p style="white-space:pre-wrap" >{{D.leDefi.commentaire}}</p>
            </div>

          </div>
          <div class="col-4">
            <div class="card-text">
              <h6>Points: {{D.leDefi.points}}</h6>
            </div>

            <div class="card-text">
              <h6>Durée: {{D.leDefi.duree}}</h6>
            </div>
          </div>
        </div>
      </div>
      <div style="margin-top: 0px;" *ngIf='D.leDefi.dateDeModification === ""; then thenBlock else elseBlock'></div>
      <ng-template #thenBlock><p style="margin-bottom: 3px;"><small>Date de publication du défi : {{D.leDefi.dateDeCreation}}.</small></p></ng-template>
      <ng-template #elseBlock><p style="margin-bottom: 3px;"><small>Date de publication du défi : {{D.leDefi.dateDeCreation}} - Derniere modification : {{D.leDefi.dateDeModification}}.</small></p></ng-template>

      <p *ngIf="D.lesMotsClefs.length>0"><small>Mot-clef associé au défi : {{displayMotClef(D.lesMotsClefs)}}</small></p>
    </div>
  </div>
  <br/>
  <button  class="btn btn-secondary pull-right" (click)="debutNewVis()" >Faire la visite !</button>
  <div *ngIf = "newVisite">
    <app-new-visite></app-new-visite>
  </div>
</div>
<br/>
